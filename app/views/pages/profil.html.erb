<div class="container">
  <h1 class="mt-4 mb-4 title">Profil de <%= @user.username %></h1>
  <div class="row">

    <!-- Profil card -->

    <div class="col-md-4 tagcloud profil">
      <div class="dashboard-profil-tile">
        <% if @user.photo.attached? %>
        <%= cl_image_tag @user.photo.key, crop: :fill, class: "avatar-profil" %>
        <% else %>
        <%= image_tag "avatar.jpg", crop: :fill, class: "avatar-profil" %>
        <% end %>
<!--         <div class="user-scoring">
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="fas fa-star"></i>
          <i class="far fa-star"></i>
        </div> -->
        <div class="user-details mt-2">
          <div class="specs">
            <% if @user.calculation_global_rating.nan? %>
              <h5><em>(nouveau membre)</em></h5>
            <% elsif @user.has_a_global_rating? %>
              <h3>Fiabilité : <%= @user.calculation_global_rating %>/5</h3>
            <% else %>
              <h3>(nouveau membre)</h3>
            <% end %>
          </div>
        </div>
        <div class="profil-links mt-5">
          <%= link_to 'Send a Message', "#", class: "link" %>
        </div>
      </div>
    </div>
<!-- end -->

<!-- Soirées -->
    <div class="col-md-8">
      <div id="profil-list">
      <h2 class="title">Ses soirées à venir</h2>
      <ul class="list-unstyled">
        <% @user_gamenights.each do |gamenights| %>
          <% gamenights.each do |gamenight| %>
            <li class="profil-gamenight-card">
              <div class="gamenight-upvote text-center" id="profil-gamenight-upvote">
                <i class="fas fa-user-friends"></i>
                <p><%= gamenight.boardgame.players_max %></p>
              </div>
              <img src="http://unsplash.it/200/120/?random" alt="" class="gamenight-image img-rounded">
              <div class="gamenight-description">
                <h3><%= gamenight.boardgame.name %></h3>
                <p><i class="far fa-calendar-alt"> </i> <%= gamenight.date.strftime("%d-%m-%Y") %> <%= gamenight.start_time.strftime("à %H:%M") %></p>
                <p><i class="fas fa-map-pin"></i> <%= gamenight.location.address %></p>
              </div>
              <div>
                <ul class="list-inline gamenight-controls">
                  <li>
                    <%= link_to gamenight_path(gamenight) do %>
                    <i class="fas fa-eye"></i>
                    <% end %>
                  </li>
                </ul>
              </div>
            </li>
          <% end %>
        <% end %>
      </ul>
    </div>
    </div>
  </div>
<!-- end -->

<!-- Commentaires -->
  <div class="row">
    <div class="col-md-12 mt-4 mb-4">
      <div class="reviews-tile">
        <h2 class="title">Commentaires sur ses soirées</h2>
        <ul class="list-unstyled">
            <% @user_gamenights.each do |gamenights| %>
              <% gamenights.each do |gamenight| %>
                <% gamenight.participations.each do |participation| %>
                <li class="gamenight mb-1">
                  <div class="profil-review-upvote text-center border-right">
                    <img class="avatar1" alt="avatar-user" src="https://kitt.lewagon.com/placeholder/users/sarahlafer" />
                    <%= link_to participation.user.username, profil_path(participation.user) %>
                  </div>
                  <div class="profil-review-description text-left border-right">
                    <p><%= participation.description %></p>
                  </div>
                  <div class="profil-review-rating text-center">
                    <% case participation.rating %>
                    <% when 5 %>
                      <div class="user-scoring">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                      </div>
                    <% when 4 %>
                      <div class="user-scoring">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                      </div>
                    <% when 3 %>
                      <div class="user-scoring">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                        <i class="far fa-star"></i>
                      </div>
                    <% when 2 %>
                        <div class="user-scoring">
                          <i class="fas fa-star"></i>
                          <i class="fas fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                        </div>
                    <% when 1 %>
                        <div class="user-scoring">
                          <i class="fas fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                          <i class="far fa-star"></i>
                        </div>
                    <% else %>
                      <p><em>(en attente)</em></p>
                    <% end %>
                  </div>
                </li>
                <% end %>
              <% end %>
            <% end %>
          </ul>
        </div>
      </div>
    </div>
<!-- end -->
</div>
